# 移动端基础

## 1. 移动厂商

### 1.1 网络运营商

- 中国移动
- 中国联通
- 中国电信

### 1.2 设备供应商 (手机厂商)

#### 1.2.1 中国

- 华为
- 小米
- 魅族
- oppo
- vivo
- 联想/摩托罗拉
- 酷派
- 中兴
- 努比亚
- 锤子
- 乐视
- 海尔
- 格力
- HTC
- 一加
- 美图
- 小辣椒
- 金立
- 8848

#### 1.2.2 外国

- 苹果 (美国)
- 谷歌 (美国)
- 微软 (美国)
- 三星 (韩国)
- LG (韩国)
- 索尼 (日本)
- 夏普 (日本)
- 黑莓 (加拿大)
- 诺基亚 (芬兰)

### 1.3 操作系统提供商

- 谷歌 Android
- 苹果 IOS
- 微软 WindowsPhone

### 1.4 App 提供商

腾讯、阿里、百度、Facebook、Twitter 等...

## 2. 移动端浏览器

移动端大概有 30 多种浏览器，其中 20 多种处于边缘化状态

### 2.1 内置浏览器

- 内置浏览器(更新慢 它移植在了操作系统中)

- 每部手机都有内置浏览器，这个浏览器属于设备的固件，通常由操作系统厂商开发。

- 而且大多数内置浏览器都被紧密的集成到了底层的操作系统中去了，

- 换句话说，我们没有办法单独升级内置浏览器，只能借助于更新操作系统

> 不管使用何种操作系统，目前市场上的智能手机都会内置一款浏览器。但是大部分人都会再安装一个第三方浏览器来替代内置浏览器，避免使用系统内置浏览器
>
> > 一、开发者为了独占流量，强迫用户下载客户端
>
> > 二、内置浏览器确实不好用。内置浏览器需要最大化兼容各类页面
>
> > 三、运行效率不高，速度太慢。手机操作系统内置浏览器大多随系统内核一同打包，运行时作为系统应用留驻内存。这种工作模式也决定内置浏览器将消耗大量的系统资源来处理本不需要太多开销的页面请求。
>
> > 四、优化不好，流量消耗过大。

- 关于内置浏览器

  安卓出厂自带浏览器：安卓 webkit 浏览器

  安卓 webkit 浏览器并不是 google 浏览器，google 浏览器代理字符串（识别码）拥有 chrome 字段，但是安卓 weikit 没有

  最新的安卓 webkit 版本只是到 4.3 版本（存在于安卓 4.3 之前的系统），后续谷歌不再对安卓 webkit 进行更新

  4.4 及以上的安卓版本使用 chrome 浏览器作为内置浏览器,chrome 浏览器内核是 Blink

```
安卓  ==>安卓webkit
    三星 三星webkit  --> 三星Chrome
    中兴 中兴webkit      --> 中兴Chrome
    华为 华为webkit      --> 华为Chrome
    小米 小米webkit      --> 小米Chrome
    索尼 索尼webkit  --> 索尼Chrome

ios ==>safari

黑莓 ==>黑莓webkit
塞班 ==>塞班webkit
window phone ==>IE
```

### 2.2 可下载浏览器

- 更新快 独立于操作系统

  可下载浏览器相比于内置浏览器有一个优势，就是只要有了版本更新就可以更新，在我们国内可下载浏览器是会占据一定移动端浏览器份额的，一个常见的原因就是，这些浏览器提供了对当地社会更好的整合。

- 他们都是基于开源内核 Webkit 进行二次开发的，并不是完全的自主内核

- 在实践中，只有安卓才有可下载的浏览器，因为在 IOS 上不允许安装其他的渲染引擎

- 而且没有厂商会为小的平台生产可下载浏览器

  需要注意的是，运行在 IOS 上的可下载浏览器也要使用 IOS 内置的浏览器（渲染引擎），因为在 ios 上不允许安装其他的渲染引擎。

  > ios 所有浏览器必须使用 Safari 提供的内核,苹果公司在 App Store 的政策中写道：“Apps 在浏览网页时，必须使用 iOS 的 WebKit 框架以及 WebKit,JavaScript。”
  >
  > 这意味着，第三方的浏览器不能使用自身的内核。内嵌 Safari 内核使得其他浏览器公司不能提供新的功能或者加快网页加载速度。事实上，所有的第三方浏览器都不过是换了个图标的 Safari。

### 2.3 webview

- webview 是独立程序，是留给原生应用的一个操作系统浏览器接口，用了内置浏览器很多底层的组件（例如渲染引擎）。

- 它的作用是用来展示一个 web 页面。它使用的内核是 webkit 引擎，4.4 版本之后，直接使用 Chrome 作为内置网页浏览器

- ios 的操作系统默认不允许在它身上有多余的渲染引擎，因此其他浏览器想在 ios 上运行就必须使用 ios 的 webview

  > 移动应用的主体是 WebView,手机 app 就是因为调用 webview,才不需要浏览器打开内置网页

### 2.4 代理浏览器

渲染引擎存在于服务端 导致 js 性能及其低下 访问静态页面可以得到保障

代理浏览器的渲染引擎能够解析和执行 HTML CSS 还有 JavaScript，但并不是运行在设备上，而是在远程服务器上，与代理浏览器相对应的叫完备浏览器。

> **完备浏览器**: 它与我们预期的浏览器的运行方式一样，当用户请求一个页面时，浏览器就会通过 http 请求去抓取 HTML CSS Javascript 还有其他一些资源，一旦一切就绪，就会去渲染和显示页面。所有的步骤都是在客户端进行的，会占用内存，处理器的时间，电池寿命。
>
> **代理浏览器：**
>
> 1. 用户请求一个页面，它不会发送一个普通的 http 请求，而是发送一个特殊的加密链接到一个特殊的代理服务器
>
> 2. 代理服务器会发送正常的 http 请求给用户希望访问的 web 服务器，代理服务器会请求相应的资源
>
> 3. 代理服务器包含一个渲染引擎，能够正常渲染页面
> 4. 代理服务器压缩页面，把它压缩成一种文件，这种文件类似于 PDF，它有链接热点，用户也能简单的选择一些文本，或者稍微放大缩小一下
> 5. 代理服务器同样通过加密链接把这个文件发到客户端、在客户端展示
>
> 常见的代理浏览器有： opera-mini 、 uc-mini

### 2.5. 混合浏览器

- 可以选择代理 也可以选择完备的浏览器 被称作混合浏览器

## 3. 安卓内置浏览器

### 3.1 谷歌开发安卓系统的目的

- 增加用户对自己服务的使用量

- 通过提供一个拥有自己的应用和搜索引擎的现代智能手机操作系统,谷歌诱使更多的人去使用自己的服务，从而获取更好的数据，获取更多的利润

- 在手机市场中分得了一块大肥肉

  > 当 iPhone 动摇移动世界的时候，大部分公司意识到他们需要一款与 IOS 匹敌的操作系统来保持自己在移动世界的地位，一些亚洲厂商以及摩托罗拉很快就接受了谷歌的提议（诺基亚和黑莓认为自己能独立适应市场）

### 3.2 不同品牌 Android 手机内置浏览器的差异

- 旧的安卓的内置浏览器是 安卓 webkit

- 设备厂商希望望差异化，如果所有设备的操作系统都是一样的，那绝大多数消费者就不会关心他购买的是哪个品牌了,为了实现差异化，设备厂商会对内置浏览器做相应的修改。

- 谷歌不希望差异化，我们 web 开发者更不希望差异化。

- 谷歌尝试将旧的安卓 webkit 浏览器转为 Chrome

- Chrome 可以独立于安卓操作系统单独更新，因为 Chrome 本身就是一个应用

### 3.3 安卓 webkit 和 chrome

- 安卓 webkit 并不是 chrome，注意区分他们俩。
- chrome 在它的用户代理字符串 (`navigattor.userAgent`) 中包含 chrome 这个单词，而安卓 webkit 没有。

### 3.4 chromium

- Chromium 是谷歌为 windows，Mac，Linux，安卓设计的浏览器，人人都可下载，是开源的。
- 渲染引擎为 Blink，Blink 是为 Html Css Dom 设计的渲染引擎，它通常与 V8 js 引擎配合使用。

  > WebKit 项目是苹果公司在 2005 年发起的一个新的开源项目，是 Safari 浏览器的内核，是目前的主流浏览器渲染引擎。WebKit 项目具有结构清晰、易于维护等优点，WebKit 简单灵活和便于引入新移植的特性，使其迅速称为主流的渲染引擎。
  >
  > Android 4.4 之前的 Android 系统浏览器内核是 WebKit，Android4.4 系统浏览器切换到了 Chromium(内核是 Webkit 的分支 Blink)，Windows Phone 8 系统浏览器内核是 Trident。
  >
  > Chromuim 项目是 Google 公司以苹果开源项目 WebKit 作为内核，创建的一个新的项目，该项目的目标是创建一个快速的、支持众多操作系统的浏览器。在 Chromium 项目基础上，Google 发布了自己的浏览器产品 Chrome。与使用 WebKit 作为内核的 Safari 浏览器不同，Chromium 本身就是一个浏览器，而不是 Chrome 浏览器的内核，再未从 WebKit 项目分离之前，Chrome 浏览器使用的是 WebKit 内核。2013 年 4 月，Google 宣布从 Webkit 复制出来并独立运作 Blink 项目，该项目也就是目前 Android4.4 及以上系统浏览器采用的内核。

  > Chromium:
  >
  > Chromium 是谷歌为 windows，Mac，Linux，安卓设计的浏览器
  >
  > 人人都可下载，是开源的
  >
  > 渲染引擎为 Blink
  >
  > Blink 是为 Html Css Dom 设计的渲染引擎它通常与 V8 js 引擎配合使用

  > Chromium 和 Chrome 的区别：
  >
  > 1. Chromium 相当于 Chrome 的工程版或称实验版
  > 2. Chromium 是谷歌的开源项目，开发者们可以共同去改进它，然后谷歌会收集改进后的 Chromium 并发布改进后安装包。Chrome 不是开源项目，谷歌会把 Chromium 的东西更新到 Chrome 中。你也可以这么理解 Chromium 是体验版，Chrome 是正式版

  > Chromium 和 Chrome 是目前公认的最快的网页浏览方式。
  >
  > 使用 Chromium 开源代码的浏览器有 360 极速浏览器、枫树浏览器、太阳花浏览器、世界之窗极速版、傲游浏览器和 UC 浏览器电脑版等。
  >
  > 搜狗高速浏览器和 qq 浏览器官网未提及 Chromium，只是说采用 webkit 内核，经网友测试这两款浏览器极有可能也是使用的 Chromium，只是官方不承认而已。
  >
  > 2018 年 8 月 16 日晚，红芯时代（北京）科技有限公司发布声明称：红芯浏览器内核是基于通用的浏览器内核架构(即 Chromium 开源项目，但不是 Chrome 浏览器)的基础上进行技术创新的

### 3.5 安卓内置浏览器现状

- 大部分安卓 4 以下的设备都使用安卓 webkit 浏览器来作为它们的内置浏览器
- 从安卓 4.4 开始，安卓 webkit 浏览器不再可用，希望更新到 4.4 的设备厂商需要自己决定使用什么浏览器，安卓 webkit？ 基于自己的 Chromium 浏览器？Google Chrome？或者其他完全不同的浏览器？
- Google 拥有的 Nexus 设备和摩托罗拉都使用 Google Chrome 作为内置浏览器
- 亚马逊使用自己的浏览器，slik，他们选择不用谷歌服务
- 三星使用基于 Chromium 的三星 google 浏览器

## 4. 三种 App

### 4.1 Native App 原生 App

- 原生 APP 就是利用 Android、iOS 平台官方的开发语言、开发类库、工具进行开发。比如安卓的 java 语言，iOS 的 object-c 语言。在操作系统上直接运行的 App。

- 在实现上要么使用`Objecttive-c`和`cocoaTouch Framework`撰写`iOS`程序，要么选择`java+Android Framework`撰写`android`应用程序。
- 目前较为成熟，各大公司均采用此方式。但是其人工成本较高，同一个项目，至少需要`Android`端、`iOS`端、`Web`端三个开发团队

#### 4.1.1 优点：

1. 拥有手机的各种功能的权限，比如获取个人信息，摄像头以及重力加速器等等。功能最为强大,特别是在与系统交互中,几乎所有功能都能实现
2. 直接依托于操作系统,交互性最强,性能最好
3. 手机用户无法上网也可访问 APP 应用中以前下载的数据。
4. 针对不同平台提供不同体验
5. 下载到本地，可节省带宽成本
6. 用户留存率高

#### 4.1.2 缺点：

1. 开发成本高，周期长。
2. 无法跨平台,不同平台 Android 和 iOS 上都要各自独立开发,安卓和 ios 都需要单独开发，且支持设备有限。
3. 原生的一个很大特点就是独立,所以不太容易入门,不像 web 前端一样那么广泛,而且 Android,iOS 都需要独立学习
4. 更新缓慢,特别是发布应用商店后,需要等到审核周期,APP 应用更新新功能，涉及到每次要向各个应用商店进行提交审核，审核期长。
5. 移植到不同平台上比较麻烦
6. 需要维护多个版本
7. 盈利需要与第三方分成

### 4.2 WebApp

- 以 Web 开发语言(HTML、CSS、JavaScript)开发的，在浏览器上运行的 App。其本质是浏览器功能的叠加。

- `webapp`是生存在浏览器里的应用，所以只能运行在浏览器里，宿主是浏览器，不再是操作系统。资源一般都在网络上。说的根本点就是一个触屏版的网站。

- 一般说来，移动`Web App`都是都是需要用到网络的，它们利用设备上的浏览器(比如`iPhone`的`Safari`)来运行，而且它们不需要在设备上下载后安装。

#### 4.2.1 优点：

1. 支持范围广，兼容多种设备。
2. 跨平台开发，用户通过浏览器访问，开发者更新仅需要通过服务器更新即可
3. 开发成本低，周期短，可以即时上线。
4. 更新无需通知用户，不需要手动升级；

#### 4.2.2 缺点：

1. 和原生 App 相比，性能和体验都大打折扣，对动画和图片支持较差
2. 并不能访问手机的所有功能，很多权限受到限制，比如摄像头和 GPS，重力加速器等
3. 假如没有联网，则不能使用
4. 临时性的入口；
5. 无法获取系统级别的通知，提醒，动效等等；

### 4.3 HybridApp 混合 App

- 即利用了原生 APP 的开发技术还应用了 HTML5 开发技术，是原生和 HTML5 技术的混合应用。混合比例不限。性能介于 WebApp 和原生 App 之间。

- 绝大部分大厂的 App 都早已是混合 App 的模式。
- `hybridapp`是一个半原生程序，伪造了一个浏览器的`apk/ipa`原生程序，把地址写死了，然后里面运行了一个`webapp`。里面是`WebView UI` 。但是还是运行在机器的操作系统上。
- HybridApp 应用就是包了个客户端的壳，其实里面是`HTML5`的网页
- 总体特性更接近`Native App`但是和`Web App`区别较大。只是因为同时使用了网页语言编码，所以开发成本和难度比`Native App`要小很多。因此说，`Hybrid App`兼具了`Native App`的所有优势，也兼具了`Web App`使用`HTML5`跨平台开发低成本的优势

#### 4.3.1 优点：

1. 比 web 版实现功能多。
2. App 的更新比较方便。
3. 可离线运行。

#### 4.3.2 缺点：

1. 用户体验不如本地应用。
2. 性能稍慢（需要连接网络）。
3. 技术还不是很成熟。
